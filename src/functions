#
# Various functions
#

# retrieves our current shell according to $SHELL
get_shell () {
    basename $SHELL
}

# is <script/binary> installed? (only checks $PATH and builtins)
am_i_installed() {
    command -v $1 >/dev/null 2>&1 && echo 1 || echo 0
}

# simple calculator
calc () {
    awk "BEGIN { pi = 4.0*atan2(1.0,1.0); degree = pi/180.0; print $* }";
}

# telnet SSL connections
telnet-ssl() {
    if test $# -ne 2 ; then
        printf "Usage: $0 SERVER PORT\n"
        return 1
    fi

    openssl s_client -connect $1:$2
}

# git-related functions

# merge origin branch
gmo() {
    if test $# -ne 1 ; then
        printf "Usage: $0 BRANCH\n"
        return 1
    fi

    git merge origin/$1
}

# merge upstream branch
gmu() {
    if test $# -ne 1 ; then
        printf "Usage: $0 BRANCH\n"
        return 1
    fi

    git merge upstream/$1
}

# rename local branch
gbmv() {
    if test $# -ne 2 ; then
        printf "Usage: $0 OLDBRANCH NEWBRANCH\n"
        return 1
    fi

    git branch -m "$1" "$2"
}
