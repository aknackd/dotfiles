
#
# Various aliases
#

alias whereami='echo "${USER}@$(hostname | sed s/\.local$//):$(pwd)"'
alias df='df -hT'
alias more='less -im'
alias mv='mv -i'
alias rm='rm -i'
alias rmdir='rm -r'
alias grep='grep -E --color=auto'

test $(get_shell) = "bash" && alias ?=calc

alias tmux="TERM=xterm-256color tmux"
alias screen=tmux

# Avoid wierd errors when ssh'ing into remote servers that don't
# have 256 color support installed
alias ssh="TERM=xterm-color ssh"

# Prefer neovim over vim
command -v nvim >/dev/null && alias vim="TERM=screen-256color nvim"

case "$(uname -s)" in
    Darwin)
        alias top='top -s 1 -ca -o cpu'
        alias lsmod=kextstat
        alias modprobe=kextload
        alias rmmod=kextunload
        alias crontab="VIM_CRONTAB=true crontab"
        alias zcat=gzcat

        test -f /usr/local/share/dotnet/dotnet && alias dotnet=/usr/local/share/dotnet/dotnet

        if [ $(am_i_installed brew) -eq 1 ]; then
            HOMEBREW_PREFIX=$(brew --prefix)
            HOMEBREW_CELLAR=$(brew --cellar)
            LS_OPTIONS="--color=auto --group-directories-first --quoting-style=literal"

            test -f "$HOMEBREW_PREFIX/bin/7za" && alias 7z="$HOMEBREW_PREFIX/bin/7za"
            test -f "$HOMEBREW_PREFIX/bin/git" && alias git="$HOMEBREW_PREFIX/bin/git"

            # prefer GNU versions
            test -f "$HOMEBREW_PREFIX/bin/gls"        && alias ls="${HOMEBREW_PREFIX}/bin/gls $LS_OPTIONS"
            test -f "$HOMEBREW_PREFIX/bin/gseq"       && alias seq="${HOMEBREW_PREFIX}/bin/gseq"
            test -f "$HOMEBREW_PREFIX/bin/gwc"        && alias wc="${HOMEBREW_PREFIX}/bin/gwc"
            test -f "$HOMEBREW_PREFIX/bin/gdu"        && alias du="${HOMEBREW_PREFIX}/bin/gdu"
            test -f "$HOMEBREW_PREFIX/bin/gdf"        && alias df="${HOMEBREW_PREFIX}/bin/gdf"
            test -f "$HOMEBREW_PREFIX/bin/gha1sum"    && alias sha1sum="${HOMEBREW_PREFIX}/bin/gsha1sum"
            test -f "$HOMEBREW_PREFIX/bin/gsha244sum" && alias sha244sum="${HOMEBREW_PREFIX}/bin/gsha244sum"
            test -f "$HOMEBREW_PREFIX/bin/gsha256sum" && alias sha256sum="${HOMEBREW_PREFIX}/bin/gsha256sum"
            test -f "$HOMEBREW_PREFIX/bin/gsha384sum" && alias sha384sum="${HOMEBREW_PREFIX}/bin/gsha384sum"
            test -f "$HOMEBREW_PREFIX/bin/gsha512sum" && alias sha512sum="${HOMEBREW_PREFIX}/bin/gsha512sum"
            test -f "$HOMEBREW_PREFIX/bin/gcal"       && alias cal="$HOMEBREW_PREFIX/bin/gcal"
            test -f "$HOMEBREW_PREFIX/bin/gsed"       && alias sed="$HOMEBREW_PREFIX/bin/gsed"
            test -f "$HOMEBREW_PREFIX/bin/gtar"       && alias tar="$HOMEBREW_PREFIX/bin/gtar"

            unset HOMEBREW_PREFIX HOMEBREW_CELLAR LS_OPTIONS
        fi
        ;;

    Linux)
        # ls: Group directories if ls has the capability
        man ls | col -bx | grep '\-\-group\-directories\-first' >/dev/null
        test $? && alias ls='ls --color=auto --group-directories-first'
        ;;
esac

# git aliases
alias gs='git status'
alias gh='git hist | cat -'
alias gl='git log'
alias gc='git commit'
alias gco='git checkout'
alias ga='git add'
alias gm='git merge'
alias gp='git push'
alias gr='git reset'
alias gfo='git fetch origin'
alias gpo='git push origin'
alias gfu='git fetch upstream'
alias gpu='git push upstream'

# vagrant aliases
if [ $(am_i_installed vagrant) ]; then
    alias v=vagrant
    alias vinit='vagrant init'
    alias vba='vagrant box add'
    alias vbrm='vagrant box remove'
    alias vbu='vagrant box update'
    alias vbls='vagrant box list'
    alias vup='vagrant up'
    alias vh='vagrant halt'
    alias vd='vagrant destroy -f'
    alias vssh='vagrant ssh'
    alias vr='vagrant reload'
    alias vp='vagrant provision'
    alias vpsh='vagrant provision --provision-with shell'
    alias vps='vagrant provision --provision-with salt'
    alias vpp='vagrant provision --provision-with puppet'
    alias vpd='vagrant provision --provision-with docker'
    alias vpls='vagrant plugin list'
    alias vpi='vagrant plugin install'
    alias vprm='vagrant plugin uninstall'
    alias vpu='vagrant plugin update'
    alias vs='vagrant status'
    alias vgs='vagrant global-status'
fi

# VirtualBox
alias vbm='VBoxManage'
